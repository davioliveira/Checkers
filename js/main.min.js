function initGame(){initTable();initPieces();addEventListeners()}function addEventListeners(){$(".checkers-cell").click(function(){handleCellClick(this)});$(".checkers-piece").click(function(){handlePieceClick(this)});$("#hint").click(function(){handleHintClick(this)})}function handleHintClick(e){ENABLE_HINT=!ENABLE_HINT;if(!ENABLE_HINT){removeCellHighlights();$("#hint").html("I NEED A HINT!")}else{var t=$(".checkers-piece.selected");t.length>0&&highlightMoves(t);$("#hint").html("I DON'T NEED ANY HINT!")}$("#hint").attr("data-state",ENABLE_HINT)}function handleCellClick(e){var t=$(".checkers-piece.selected");if(t){var n=t.attr("data-color");if(currentTurn==n){var r=t.parent(".checkers-column").attr("data-column"),i=t.parent(".checkers-column").parent(".checkers-row").attr("data-row"),s={row:i,column:r},o=$(e).attr("data-column"),u=$(e).parent(".checkers-row").attr("data-row"),a={row:u,column:o},f=getMoveActions(table,s),l=getEatActions(table,s,[],[]);if(f.length>0)for(var c=0;c<f.length;c++)if(f[c].row==a.row&&f[c].column==a.column){movePiece(s,a,changeTurn());return}if(l.length>0)for(var c=0;c<l.length;c++){var h=l[c],p=h.movementPositions[h.movementPositions.length-1];p.row==a.row&&p.column==a.column&&eatPiece(s,h)}}}}function handlePieceClick(e){var t=$(e).hasClass("selected");removeCellHighlights();removePieceSelections();var n=$(e).attr("data-color");n==currentTurn&&(t||$(e).toggleClass("selected"));ENABLE_HINT&&$(e).hasClass("selected")&&highlightMoves($(e))}function highlightMoves(e){var t=e.parent(".checkers-column").attr("data-column"),n=e.parent(".checkers-column").parent(".checkers-row").attr("data-row"),r={row:n,column:t},i=getMoveActions(table,r),s=getEatActions(table,r,[],[]);for(var o=0;o<i.length;o++)addCellHighlight(i[o]);for(var o=0;o<s.length;o++)for(var u=0;u<s[o].movementPositions.length;u++)addCellHighlight(s[o].movementPositions[u])}function addCellHighlight(e){$("div[data-row='"+e.row+"'] .checkers-cell[data-column='"+e.column+"']").addClass("highlight")}function removeCellHighlights(){$(".checkers-cell").each(function(e){$(this).removeClass("highlight")})}function removePieceSelections(){$(".checkers-piece").each(function(e){$(this).removeClass("selected")})}function initTable(){initTableStructure(tableSize);var e="";for(var t=0;t<table.length;t++){var n=t%2,r="<div class='checkers-row' data-row='"+t+"'>";for(var i=0;i<table[t].length;i++){n=!n;var s="<div data-color='"+n+"' data-column='"+i+"' class='checkers-cell checkers-column'></div>";r+=s}r+="</div>";e+=r;e+="<div class='clear-fix'></div>"}$("#checkersTable").html(e)}function initTableStructure(e){var t,n;for(t=0;t<e;t++){var r=[];for(n=0;n<e;n++)r[n]=-1;table.push(r)}}function initPieces(){var e=(tableSize-2)/2,t="<div data-color='#color#' class='checkers-piece'></div>";for(var n=0;n<e;n++)for(var r=n%2;r<tableSize;r+=2){table[n][r]=TOP_PLAYER;$("div[data-row='"+n+"'] .checkers-cell[data-column='"+r+"']").html(t.replace("#color#",TOP_PLAYER))}for(var n=e+2;n<tableSize;n++)for(var r=n%2;r<tableSize;r+=2){table[n][r]=BOTTOM_PLAYER;$("div[data-row='"+n+"'] .checkers-cell[data-column='"+r+"']").html(t.replace("#color#",BOTTOM_PLAYER))}}function eatPiece(e,t){var n=e;for(var r=0;r<t.movementPositions.length;r++){r==t.movementPositions.length-1?setTimeout(ANIMATION_SPEED+10,movePiece(n,t.movementPositions[r],changeTurn())):setTimeout(ANIMATION_SPEED+10,movePiece(n,t.movementPositions[r]));removePiece(t.removedPiecesPosition[r]);n=t.movementPositions[r]}}function removePiece(e){$("div[data-row='"+e.row+"'] .checkers-cell[data-column='"+e.column+"']").html("");table[e.row][e.column]=EMPTY_CELL}function movePiece(e,t,n){arguments.length==2&&(n=function(){});var r=$("div[data-row='"+e.row+"'] .checkers-cell[data-column='"+e.column+"']").find(".checkers-piece");if(r){var i=$("div[data-row='"+e.row+"'] .checkers-cell[data-column='"+e.column+"']").html(),s=$("div[data-row='"+t.row+"'] .checkers-cell[data-column='"+t.column+"']").position(),o=r.position().left+"px",u=r.position().top+"px";r.css({position:"absolute",left:o,top:u});r.animate({left:s.left+12+"px",top:s.top+"px"},ANIMATION_SPEED,function(){$("div[data-row='"+t.row+"'] .checkers-cell[data-column='"+t.column+"']").html(i);$("div[data-row='"+e.row+"'] .checkers-cell[data-column='"+e.column+"']").html("");r=$("div[data-row='"+t.row+"'] .checkers-cell[data-column='"+t.column+"']").find(".checkers-piece");r.click(function(){handlePieceClick(this)});table[t.row][t.column]=table[e.row][e.column];table[e.row][e.column]=EMPTY_CELL;removePieceSelections();removeCellHighlights();n()})}}function changeTurn(){currentTurn?currentTurn=TOP_PLAYER:currentTurn=BOTTOM_PLAYER;$("#turnShower").attr("data-color",currentTurn)}var table=[],tableSize=8,ANIMATION_SPEED=500,ENABLE_HINT=!1,currentTurn=TOP_PLAYER;