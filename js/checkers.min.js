/*
* piecePosition = {row: ?, column: ?}
* TOP_PLAYER = BLUE
* BOTTOM_PLAYER = RED
* */function getMoveActions(e,t){var n=[],r=e[t.row][t.column],i=getDiagonalMoves(r,t);for(var s=0;s<i.length;s++)try{var o=copyTable(e),u=i[s];if(e[u.row][u.column]==EMPTY_CELL){o[u.row][u.column]=r;o[t.row][t.column]=EMPTY_CELL;u.table=o;n.push(u)}}catch(a){}return n}function getEatActions(e,t,n,r,i){var s=[],o=e[t.row][t.column],u=[{type:MOVE_PIECE,row:t.row+1,column:t.column+1},{type:MOVE_PIECE,row:t.row+1,column:t.column-1},{type:MOVE_PIECE,row:t.row-1,column:t.column-1},{type:MOVE_PIECE,row:t.row-1,column:t.column+1}];try{if(e[u[0].row][u[0].column]!=EMPTY_CELL&&e[u[0].row][u[0].column]!=o){var a={row:u[0].row+1,column:u[0].column+1};if(e[a.row][a.column]==EMPTY_CELL){var f=copyTable(e);f[a.row][a.column]=o;f[u[0].row][u[0].column]=EMPTY_CELL;f[t.row][t.column]=EMPTY_CELL;var l=copyNodeList(n);l.push(a);var c=copyNodeList(r);c.push(u[0]);s.push({type:EAT_PIECE,movementPositions:l,removedPiecesPosition:c,table:f,fromRow:i.row,fromColumn:i.column});concatLists(s,getEatActions(f,a,l,c,i))}}}catch(h){}try{if(e[u[1].row][u[1].column]!=EMPTY_CELL&&e[u[1].row][u[1].column]!=o){var a={row:u[1].row+1,column:u[1].column-1};if(e[a.row][a.column]==EMPTY_CELL){var f=copyTable(e);f[a.row][a.column]=o;f[u[1].row][u[1].column]=EMPTY_CELL;f[t.row][t.column]=EMPTY_CELL;var l=copyNodeList(n);l.push(a);var c=copyNodeList(r);c.push(u[1]);s.push({type:EAT_PIECE,movementPositions:l,removedPiecesPosition:c,table:f,fromRow:i.row,fromColumn:i.column});concatLists(s,getEatActions(f,a,l,c,i))}}}catch(h){}try{if(e[u[2].row][u[2].column]!=EMPTY_CELL&&e[u[2].row][u[2].column]!=o){var a={row:u[2].row-1,column:u[2].column-1};if(e[a.row][a.column]==EMPTY_CELL){var f=copyTable(e);f[a.row][a.column]=o;f[u[2].row][u[2].column]=EMPTY_CELL;f[t.row][t.column]=EMPTY_CELL;var l=copyNodeList(n);l.push(a);var c=copyNodeList(r);c.push(u[2]);s.push({type:EAT_PIECE,movementPositions:l,removedPiecesPosition:c,table:f,fromRow:i.row,fromColumn:i.column});concatLists(s,getEatActions(f,a,l,c,i))}}}catch(h){}try{if(e[u[3].row][u[3].column]!=EMPTY_CELL&&e[u[3].row][u[3].column]!=o){var a={row:u[3].row-1,column:u[3].column+1};if(e[a.row][a.column]==EMPTY_CELL){var f=copyTable(e);f[a.row][a.column]=o;f[u[3].row][u[3].column]=EMPTY_CELL;f[t.row][t.column]=EMPTY_CELL;var l=copyNodeList(n);l.push(a);var c=copyNodeList(r);c.push(u[3]);s.push({type:EAT_PIECE,movementPositions:l,removedPiecesPosition:c,table:f,fromRow:i.row,fromColumn:i.column});concatLists(s,getEatActions(f,a,l,c,i))}}}catch(h){}return s}function getDiagonalMoves(e,t){t.row=Number(t.row);t.column=Number(t.column);if(e==TOP_PLAYER)var n=[{type:MOVE_PIECE,row:t.row+1,column:t.column+1,fromRow:t.row,fromColumn:t.column},{type:MOVE_PIECE,row:t.row+1,column:t.column-1,fromRow:t.row,fromColumn:t.column}];else var n=[{type:MOVE_PIECE,row:t.row-1,column:t.column+1,fromRow:t.row,fromColumn:t.column},{type:MOVE_PIECE,row:t.row-1,column:t.column-1,fromRow:t.row,fromColumn:t.column}];return n}function hasWinner(e){var t=!1,n=!1;for(var r=0;r<e.length&&(!t||!n);r++)for(var i=0;i<e[0].length&&(!t||!n);i++)e[r][i]==TOP_PLAYER?t=!0:e[r][i]==BOTTOM_PLAYER&&(n=!0);return t&&!n?TOP_PLAYER:!t&&n?BOTTOM_PLAYER:null}function concatLists(e,t){for(var n=0;n<t.length;n++)e.push(t[n])}function copyTable(e){var t=[];for(var n=0;n<e.length;n++){var r=[];for(var i=0;i<e[0].length;i++)r[i]=e[n][i];t[n]=r}return t}function copyNodeList(e){var t=[];for(var n=0;n<e.length;n++)t[n]={row:e[n].row,column:e[n].column};return t}function getPlayerPiecesPosition(e,t){var n=[];for(var r=0;r<e.length;r++)for(var i=0;i<e[0].length;i++)e[r][i]==t&&n.push({row:r,column:i});return n}function getPossibleMovements(e,t){var n=getPlayerPiecesPosition(e,t),r=[];for(var i=0;i<n.length;i++){var s=n[i],o=getMoveActions(e,s),u=getEatActions(e,s,[],[],s);concatLists(u,o);concatLists(r,u)}return r}function iaMove(){var e=minimaxDecision(table);console.log(e);console.log(table);e.type==MOVE_PIECE?movePiece({row:e.fromRow,column:e.fromColumn},[{row:e.row,column:e.column}],[]):movePiece({row:e.fromRow,column:e.fromColumn},e.movementPositions,e.removedPiecesPosition)};